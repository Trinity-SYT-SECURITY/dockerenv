FROM joomla:3.7.5

# Configure LDAP.
RUN apt-get update \
 && apt-get install libldap2-dev -y \
 && rm -rf /var/lib/apt/lists/* \
 && docker-php-ext-configure ldap --with-libdir=lib/x86_64-linux-gnu/ \
 && docker-php-ext-install ldap

RUN apt-get update \
 && apt-get install git -y

RUN git clone https://github.com/xdebug/xdebug.git \
 && cd xdebug \
 && git checkout XDEBUG_2_5_5 \
 && phpize \
 && ./configure --enable-xdebug \
 && make \
 && make install

COPY xdebug.ini /usr/local/etc/php/conf.d/

RUN docker-php-ext-enable xdebug
